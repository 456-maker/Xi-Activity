<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>é­”æ³•å…ƒç´ é›†é»</title>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #f9f9f9;
}
.container {
  max-width: 360px;
  padding: 24px;
  text-align: center;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
#message { margin-top: 20px; font-weight: bold; color: #007bff; white-space: pre-wrap; }
</style>
</head>
<body>

<div class="container">
    <h1 id="taskTitle">é­”æ³•å…ƒç´ ä»»å‹™</h1>
    <p id="taskDesc">ä»»å‹™èªªæ˜æ–‡å­—</p>
    <div id="message">æƒæ NFC ä¸­...</div>
</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbw7WNI6elsQCuI2A5nJ7fEK8ydNdyclE21gfoSW-A51QQLhYTjzeRSU6ZVzuCgS3Wo/exec"

const tasks = {
  "01": { title: "ç¬¬ä¸€ç«™ğŸŸ  æ©˜è‰²ï½œæ´»åŠ›èƒ½é‡", desc: "æ­å–œä½ ç²å¾—äº†ã€æ´»åŠ›èƒ½é‡ã€‘...é€™æ˜¯æ•£è½åœ¨å¤§é„§ä¼¯èŠ±ä¸Šçš„é­”æ³•å…ƒç´ ï¼æœ‰äº†é€™å€‹é­”æ³•ï¼Œè¨˜å¾—è¦æ—©ç¡ï¼Œé€™æ¨£æ‰èƒ½å……æ»¿æ´»åŠ›ï¼Œä¸æœƒæ„Ÿå†’ğŸ’ª" },
  "02": { title: "ç¬¬äºŒç«™âš« é»‘è‰²ï½œç¯€èƒ½ä¹‹åŠ›", desc: "æ­å–œä½ ç²å¾—äº†ã€ç¯€èƒ½ä¹‹åŠ›ã€‘...é€™æ˜¯æ•£è½åœ¨é›è›‹èŠ±ä¸Šçš„é­”æ³•å…ƒç´ ï¼æœ‰äº†é€™å€‹é­”æ³•ï¼Œå°±è¦æ‡‚å¾—æ¸›å°‘å¡‘è† ä½¿ç”¨ï¼Œåœ°çƒæ‰æ›´å¥åº·ï¼ğŸŒ" },
  "03": { title: "ç¬¬ä¸‰ç«™ğŸŸ¢ ç¶ è‰²ï½œæ£®æ—å®ˆè­·", desc: "æ­å–œä½ ç²å¾—äº†ã€æ£®æ—å®ˆè­·ã€‘...é€™æ˜¯æ•£è½åœ¨åˆºè”¥ä¸Šçš„é­”æ³•å…ƒç´ ï¼æœ‰äº†é€™å€‹é­”æ³•ï¼Œå°±è¦å®ˆè­·æ£®æ—ï¼Œå®ˆè­·å¤§è‡ªç„¶çš„å®¶ğŸŒ³" },
  "04": { title: "ç¬¬å››ç«™ğŸ”µ æ·ºè—è‰²ï½œæ¸…æ³‰ç¥ç¦", desc: "æ­å–œä½ ç²å¾—äº†ã€æ¸…æ³‰ç¥ç¦ã€‘...é€™æ˜¯æ•£è½åœ¨ç¥ç§˜æœä¸Šçš„é­”æ³•å…ƒç´ ï¼æœ‰äº†é€™å€‹é­”æ³•ï¼Œå¿…é ˆæ‡‚å¾—æ°´æ˜¯å¯¶è²´è³‡æºï¼Œè¨˜å¾—ç¯€ç´„èˆ‡ä¿è­·ğŸ’§" },
  "05": { title: "ç¬¬äº”ç«™ğŸŸ£ ç´«è‰²ï½œæ™ºæ…§é­”æ³•", desc: "æ­å–œä½ ç²å¾—äº†ã€æ™ºæ…§é­”æ³•ã€‘...é€™æ˜¯æ•£è½åœ¨é‡‘æ–°æœ¨è–‘å­ä¸Šçš„é­”æ³•å…ƒç´ ï¼æœ‰äº†é€™å€‹é­”æ³•ï¼Œå¥½å¥‡å¿ƒå°‡æœƒè®“ä½ æ›´è°æ˜ï¼Œå­¸ç¿’ç„¡é™å¯èƒ½ğŸ’«" },
  "06": { title: "ç¬¬å…­ç«™ğŸŸ¤ æ£•è‰²ï½œå¤§åœ°ä¹‹æ ¹", desc: "æ­å–œä½ ç²å¾—äº†ã€å¤§åœ°ä¹‹æ ¹ã€‘...é€™æ˜¯æ•£è½åœ¨è‚‰æ¡‚ä¸Šçš„é­”æ³•å…ƒç´ ï¼æœ‰äº†é€™å€‹é­”æ³•ï¼Œå°±è¦æ„›è­·åœŸåœ°ï¼Œè®“è¾²ä½œç‰©å¥åº·ç”Ÿé•·ğŸª´" },
  "07": { title: "ç¬¬ä¸ƒç«™ğŸ”µ æ·±è—è‰²ï½œæµ·æ´‹ä¹‹åŠ›", desc: "æ­å–œä½ ç²å¾—äº†ã€æµ·æ´‹ä¹‹åŠ›ã€‘...é€™æ˜¯æ•£è½åœ¨è©ææ¨¹ä¸Šçš„é­”æ³•å…ƒç´ ï¼æœ‰äº†é€™å€‹é­”æ³•ï¼Œå¿…é ˆæ‡‚å¾—ä¿è­·æµ·æ´‹ï¼Œé­šå…’æ‰èƒ½å¿«æ¨‚æ¸¸æ³³ğŸŸ" },
  "08": { title: "ç¬¬å…«ç«™ğŸ”´ ç´…è‰²ï½œæº«æš–ä¹‹å¿ƒ", desc: "æ­å–œä½ ç²å¾—äº†ã€æº«æš–ä¹‹å¿ƒã€‘...é€™æ˜¯æ•£è½åœ¨é¾èˆŒè˜­ä¸Šçš„é­”æ³•å…ƒç´ ï¼æœ‰äº†é€™å€‹é­”æ³•ï¼Œè®“ä½ çŸ¥é“å¹³ç­‰å°å¾…æ¯å€‹äººï¼Œå¯ä»¥è®“ç¤¾æœƒæ›´æº«æš–ï¼ğŸ‘" },
  "09": { title: "ç¬¬ä¹ç«™ğŸŸ¡ é»ƒè‰²ï½œé™½å…‰é­”æ³•", desc: "æ­å–œä½ ç²å¾—äº†ã€é™½å…‰é­”æ³•ã€‘...é€™æ˜¯æ•£è½åœ¨æœ±æ§¿ä¸Šçš„é­”æ³•å…ƒç´ ï¼æœ‰äº†é€™å€‹é­”æ³•ï¼Œå¯¶è²´çš„é™½å…‰å°‡æœƒç…§äº®ä½ å¿ƒè£¡ï¼Œè®“ä½ å¿ƒæƒ…æ›´æ˜äº®ğŸ’¡" }
};

// å–å¾— URL åƒæ•¸
const urlParams = new URLSearchParams(window.location.search);
const station = urlParams.get('station');

if (!tasks[station]) {
  document.getElementById("taskTitle").innerText = "æ„Ÿæ‡‰éŒ¯èª¤";
  document.getElementById("taskDesc").innerText = "è«‹ç¢ºèªæƒæçš„ NFC æ˜¯å¦æ­£ç¢ºã€‚";
  document.getElementById("message").innerText = "";
} else {
  document.getElementById("taskTitle").innerText = tasks[station].title;
  document.getElementById("taskDesc").innerText = tasks[station].desc;
}

// LIFF åˆå§‹åŒ–
liff.init({ liffId: "2008718308-nx2rhV48" })
.then(() => liff.getProfile())
.then(profile => {
  const userId = profile.userId;

  // ç›´æ¥è‡ªå‹•é ˜å–é»æ•¸ï¼Œä¸ç”¨æŒ‰æŒ‰éˆ•
  fetch(`${WEB_APP_URL}?lineId=${userId}&station=${station}`)
    .then(res => res.text())
    .then(msg => {
      document.getElementById("message").innerText = msg;
    })
    .catch(err => {
      document.getElementById("message").innerText = "ç³»çµ±éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦";
      console.error(err);
    });
})
.catch(err => {
  document.getElementById("message").innerText = "ç„¡æ³•å–å¾— LINE ä½¿ç”¨è€…è³‡è¨Š";
  console.error(err);
});
</script>

</body>
</html>